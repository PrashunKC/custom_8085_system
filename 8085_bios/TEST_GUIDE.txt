================================================================================
                  8085 OS v0.2 - TESTING GUIDE
================================================================================

Your OS is RUNNING RIGHT NOW! Follow these tests to verify Phase C integration.

================================================================================
TEST 1: Basic Shell Commands
================================================================================

In the terminal window, type:

  OS> HELP

Expected: Shows list of all commands including SPAWN and TASKS

  OS> VERSION

Expected: 
  8085 OS Version 0.2 Alpha
  Built: 2025-10-15
  Features: Shell, Multitasking

  OS> CLEAR

Expected: Screen clears (ANSI escape codes)

================================================================================
TEST 2: Memory Layout
================================================================================

  OS> MEM

Expected Output:
  Memory Map:
    0000-03FF : OS/BIOS (1KB)
    0400-7FFF : User Programs (31KB)
    8000-807F : Task Control Blocks (128B)    â† NEW!
    8080-FFFD : System Data & Stacks

The TCB line is the key indicator that Phase C is integrated!

================================================================================
TEST 3: Task List (Empty)
================================================================================

  OS> TASKS

Expected:
  Task List:
    No tasks running

This confirms the task system is initialized but empty.

================================================================================
TEST 4: Create First Task
================================================================================

  OS> SPAWN

Expected:
  Creating demo task...
  Task created with ID: 00

This creates a task in the first TCB slot (ID 00).

================================================================================
TEST 5: View Created Task
================================================================================

  OS> TASKS

Expected:
  Task List:
    ID   State
    --   -----
    00    READY

Task 00 should be in READY state (ready to run).

================================================================================
TEST 6: Create Multiple Tasks
================================================================================

  OS> SPAWN
  OS> SPAWN
  OS> SPAWN
  OS> TASKS

Expected:
  Task List:
    ID   State
    --   -----
    00    READY
    01    READY
    02    READY
    03    READY

All tasks should be in READY state.

================================================================================
TEST 7: Maximum Tasks (8 slots)
================================================================================

Create 8 tasks total (if you haven't already):

  OS> SPAWN
  (repeat until you have 8 tasks: IDs 00-07)

Then try one more:

  OS> SPAWN

Expected:
  Creating demo task...
  Failed to create task (no free slots)

This confirms the 8-task limit is enforced.

================================================================================
TEST 8: Task List with All Slots
================================================================================

  OS> TASKS

Expected:
  Task List:
    ID   State
    --   -----
    00    READY
    01    READY
    02    READY
    03    READY
    04    READY
    05    READY
    06    READY
    07    READY

All 8 tasks displayed with their states.

================================================================================
TEST 9: Verify Command Parsing
================================================================================

Try some variations:

  OS> help      (lowercase)
  OS> HELP      (uppercase)
  OS>    help   (with spaces)

All should work (parser is case-insensitive and skips leading spaces).

Try unknown command:

  OS> INVALID

Expected:
  Unknown command. Type HELP for list.

================================================================================
TEST 10: Exit Test
================================================================================

  OS> EXIT

Expected:
  System halted. Goodbye!

Then the system halts (HLT instruction).
To restart, relaunch ./8085_bios_system

================================================================================
VERIFICATION CHECKLIST
================================================================================

[ ] HELP shows all commands including SPAWN and TASKS
[ ] VERSION shows "0.2 Alpha" with "Multitasking" feature
[ ] MEM displays TCB area at 8000-807F
[ ] TASKS shows "No tasks" when empty
[ ] SPAWN creates tasks with sequential IDs (00, 01, 02...)
[ ] TASKS lists all created tasks with READY state
[ ] Maximum 8 tasks enforced (9th spawn fails)
[ ] CLEAR clears the screen
[ ] EXIT halts the system properly

================================================================================
WHAT THE TESTS PROVE
================================================================================

âœ“ Shell integration working
âœ“ Command parser functional
âœ“ TCB memory allocated correctly
âœ“ Task creation function working
âœ“ Task ID assignment correct
âœ“ Task state tracking accurate
âœ“ Task listing function operational
âœ“ Maximum task limit enforced
âœ“ Memory layout properly configured

================================================================================
KNOWN LIMITATIONS (Expected)
================================================================================

- Tasks don't actually RUN yet (need context switching)
- Demo task code exists but isn't executed
- All tasks stay in READY state (no RUNNING state yet)
- KILL command not implemented
- No YIELD command yet (coming in next phase)
- No RUN command for user programs yet

These are EXPECTED - Phase C integration is about the infrastructure,
not full execution yet. That's the next step!

================================================================================
NEXT PHASE GOALS
================================================================================

After you verify all tests pass:

1. Add YIELD command for manual task switching
2. Implement context switch (save/restore registers)
3. Make demo_task1 actually execute
4. Test multiple tasks running
5. Add timer for preemptive multitasking (optional)

================================================================================
TROUBLESHOOTING
================================================================================

Q: Commands don't work?
A: Check that you're using the new os_multitask.asm binary.
   Rebuild: python3 tools/assemble.py src/os_multitask.asm build/bios.bin

Q: SPAWN fails immediately?
A: TCB initialization might have failed. Check memory at 0x8000.

Q: TASKS shows nothing?
A: Create a task with SPAWN first.

Q: Strange output?
A: Restart emulator: ./8085_bios_system

================================================================================
SUCCESS CRITERIA
================================================================================

If all 10 tests pass, you have successfully:

âœ… Integrated Phase A (Shell) with Phase C (Scheduler)
âœ… Created a working multitasking OS
âœ… Implemented task management primitives
âœ… Verified all core functionality
âœ… Ready to proceed with context switching

Congratulations! You've built a real OS! ðŸŽ‰

================================================================================
